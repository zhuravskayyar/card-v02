<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ 240 –∫–∞—Ä—Ç</title>
  <style>
    body { 
      font-family: monospace; 
      padding: 20px;
      background: #1a120c;
      color: #f4e6c6;
    }
    .pass { color: #2ecc71; font-weight: bold; }
    .fail { color: #e74c3c; font-weight: bold; }
    .info { color: #3498db; }
    pre { background: #120d0a; padding: 15px; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>üß™ –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–∏ 240 –∫–∞—Ä—Ç</h1>
  <pre id="output">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</pre>

  <script type="module">
    import { CARDS, getCardById, getAllCardIds, getCardsByElement, getCardsByFaction, getCardsByRarity } from './js/data/cards.js';

    const output = document.getElementById('output');
    let log = '';

    function test(name, condition, expected, actual) {
      const pass = condition;
      log += `${pass ? '‚úÖ' : '‚ùå'} ${name}\n`;
      if (!pass) {
        log += `   –û—á—ñ–∫—É–≤–∞–ª–æ—Å—å: ${expected}\n`;
        log += `   –û—Ç—Ä–∏–º–∞–Ω–æ: ${actual}\n`;
      }
    }

    // –û—Å–Ω–æ–≤–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
    test('–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Ä—Ç', CARDS.length === 240, 240, CARDS.length);
    test('getAllCardIds –ø–æ–≤–µ—Ä—Ç–∞—î 240 ID', getAllCardIds().length === 240, 240, getAllCardIds().length);

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∏—Ö—ñ–π
    test('–ö–∞—Ä—Ç –≤–æ–≥–Ω—é', getCardsByElement('fire').length === 60, 60, getCardsByElement('fire').length);
    test('–ö–∞—Ä—Ç –≤–æ–¥–∏', getCardsByElement('water').length === 60, 60, getCardsByElement('water').length);
    test('–ö–∞—Ä—Ç –ø–æ–≤—ñ—Ç—Ä—è', getCardsByElement('air').length === 60, 60, getCardsByElement('air').length);
    test('–ö–∞—Ä—Ç –∑–µ–º–ª—ñ', getCardsByElement('earth').length === 60, 60, getCardsByElement('earth').length);

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä—ñ–¥–∫–æ—Å—Ç—ñ
    test('–ó–≤–∏—á–∞–π–Ω–∏—Ö –∫–∞—Ä—Ç', getCardsByRarity('common').length === 40, 40, getCardsByRarity('common').length);
    test('–ù–µ–∑–≤–∏—á–∞–π–Ω–∏—Ö –∫–∞—Ä—Ç', getCardsByRarity('uncommon').length === 40, 40, getCardsByRarity('uncommon').length);
    test('–†—ñ–¥–∫—ñ—Å–Ω–∏—Ö –∫–∞—Ä—Ç', getCardsByRarity('rare').length === 40, 40, getCardsByRarity('rare').length);
    test('–ï–ø—ñ—á–Ω–∏—Ö –∫–∞—Ä—Ç', getCardsByRarity('epic').length === 40, 40, getCardsByRarity('epic').length);
    test('–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∏—Ö –∫–∞—Ä—Ç', getCardsByRarity('legendary').length === 40, 40, getCardsByRarity('legendary').length);
    test('–ú—ñ—Ñ—ñ—á–Ω–∏—Ö –∫–∞—Ä—Ç', getCardsByRarity('mythic').length === 40, 40, getCardsByRarity('mythic').length);

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ—Ä–∞–∫—Ü—ñ–π
    const factions = [...new Set(CARDS.map(c => c.faction))];
    test('–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ñ—Ä–∞–∫—Ü—ñ–π', factions.length === 40, 40, factions.length);

    for (let i = 1; i <= 40; i++) {
      const fid = `F${String(i).padStart(2, '0')}`;
      const cards = getCardsByFaction(fid);
      test(`–§—Ä–∞–∫—Ü—ñ—è ${fid} –º–∞—î 6 –∫–∞—Ä—Ç`, cards.length === 6, 6, cards.length);
    }

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –∫–∞—Ä—Ç
    const f01r1 = getCardById('F01-R1');
    test('F01-R1 —ñ—Å–Ω—É—î', f01r1 !== null, '–æ–±\'—î–∫—Ç', f01r1);
    test('F01-R1 –º–∞—î –Ω–∞–∑–≤—É', f01r1?.name === '–ü–æ—Å–ª—É—à–Ω–∏–∫ –ü–æ–ø–µ–ª—è—Å—Ç–æ–≥–æ –°–æ–Ω—Ü—è', '–ü–æ—Å–ª—É—à–Ω–∏–∫ –ü–æ–ø–µ–ª—è—Å—Ç–æ–≥–æ –°–æ–Ω—Ü—è', f01r1?.name);
    test('F01-R1 basePower = 51', f01r1?.basePower === 51, 51, f01r1?.basePower);
    test('F01-R1 multiplier = 1.00', f01r1?.multiplier === 1.00, 1.00, f01r1?.multiplier);

    const f40r6 = getCardById('F40-R6');
    test('F40-R6 —ñ—Å–Ω—É—î', f40r6 !== null, '–æ–±\'—î–∫—Ç', f40r6);
    test('F40-R6 –º–∞—î –Ω–∞–∑–≤—É', f40r6?.name === '–ü–µ—Ä—à–∞ –°–∫–µ–ª—è, –ñ–∏–≤–∏–π –û–±—ñ—Ç', '–ü–µ—Ä—à–∞ –°–∫–µ–ª—è, –ñ–∏–≤–∏–π –û–±—ñ—Ç', f40r6?.name);
    test('F40-R6 basePower = 90', f40r6?.basePower === 90, 90, f40r6?.basePower);
    test('F40-R6 multiplier = 2.00', f40r6?.multiplier === 2.00, 2.00, f40r6?.multiplier);

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ–≤ —Å–∏–ª–∏
    const minCard = CARDS.reduce((min, c) => (c.basePower * c.multiplier < min.basePower * min.multiplier ? c : min));
    const maxCard = CARDS.reduce((max, c) => (c.basePower * c.multiplier > max.basePower * max.multiplier ? c : max));
    
    test('–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Å–∏–ª–∞ = 51', minCard.basePower * minCard.multiplier === 51, 51, minCard.basePower * minCard.multiplier);
    test('–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —Å–∏–ª–∞ = 180', maxCard.basePower * maxCard.multiplier === 180, 180, maxCard.basePower * maxCard.multiplier);

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–æ—Å—Ç—ñ ID
    const ids = CARDS.map(c => c.id);
    const uniqueIds = new Set(ids);
    test('–í—Å—ñ ID —É–Ω—ñ–∫–∞–ª—å–Ω—ñ', ids.length === uniqueIds.size, ids.length, uniqueIds.size);

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–æ—Å—Ç—ñ —ñ–º–µ–Ω
    const names = CARDS.map(c => c.name);
    const uniqueNames = new Set(names);
    test('–í—Å—ñ –Ω–∞–∑–≤–∏ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ', names.length === uniqueNames.size, names.length, uniqueNames.size);

    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    log += '\nüìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê:\n';
    log += `–í—Å—å–æ–≥–æ –∫–∞—Ä—Ç: ${CARDS.length}\n`;
    log += `–§—Ä–∞–∫—Ü—ñ–π: ${factions.length}\n`;
    log += `–ú—ñ–Ω. —Å–∏–ª–∞: ${minCard.basePower * minCard.multiplier} (${minCard.id})\n`;
    log += `–ú–∞–∫—Å. —Å–∏–ª–∞: ${maxCard.basePower * maxCard.multiplier} (${maxCard.id})\n`;
    
    const avgPower = CARDS.reduce((sum, c) => sum + c.basePower * c.multiplier, 0) / CARDS.length;
    log += `–°–µ—Ä–µ–¥–Ω—è —Å–∏–ª–∞: ${avgPower.toFixed(2)}\n`;

    // –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–∞—Ä—Ç
    log += '\nüé¥ –ü–†–ò–ö–õ–ê–î–ò –ö–ê–†–¢:\n\n';
    
    log += '–ü–µ—Ä—à–∞ –∫–∞—Ä—Ç–∞ (F01-R1):\n';
    log += `  –ù–∞–∑–≤–∞: ${f01r1.name}\n`;
    log += `  –§—Ä–∞–∫—Ü—ñ—è: ${f01r1.factionName}\n`;
    log += `  –°—Ç–∏—Ö—ñ—è: ${f01r1.element}\n`;
    log += `  –†—ñ–¥–∫—ñ—Å—Ç—å: ${f01r1.rarityDisplay}\n`;
    log += `  –°–∏–ª–∞: ${f01r1.basePower} √ó ${f01r1.multiplier} = ${f01r1.basePower * f01r1.multiplier}\n\n`;
    
    log += '–û—Å—Ç–∞–Ω–Ω—è –∫–∞—Ä—Ç–∞ (F40-R6):\n';
    log += `  –ù–∞–∑–≤–∞: ${f40r6.name}\n`;
    log += `  –§—Ä–∞–∫—Ü—ñ—è: ${f40r6.factionName}\n`;
    log += `  –°—Ç–∏—Ö—ñ—è: ${f40r6.element}\n`;
    log += `  –†—ñ–¥–∫—ñ—Å—Ç—å: ${f40r6.rarityDisplay}\n`;
    log += `  –°–∏–ª–∞: ${f40r6.basePower} √ó ${f40r6.multiplier} = ${f40r6.basePower * f40r6.multiplier}\n`;

    output.textContent = log;
  </script>
</body>
</html>
